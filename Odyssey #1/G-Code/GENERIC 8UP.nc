#R:\Manufacturing\Robotic Solder\Odyssey Programs\Odyssey #1\SUBROUTINES\ODYSSEY1 8UP SUBROUTINE.nc
G52 X0 Y0 Z0  (Calibration Offsets)
 
(**************** SET VARIABLES *************************************)
REAL #ROWS            			(NUMBER OF ROWS)
REAL #STEP            			(ROW PITCH/ DISTANCE BETWEEN POCKETS)
REAL #START           			(INITIAL POCKET LOCATION)
REAL #PICK
REAL #PICKZ 
REAL #DIPS            			(NUMBER OF DIPS)
REAL #SIDES           			(NUMBER OF SIDES)
REAL #ROLLOUT_ANGLE   			(ROLL OUT ANGLE)
REAL #ROLLOUT_DIFF    			(ROLL OUT DIFFERENCE)
REAL #DEPTH           			(DIP DEPTH)
REAL #WASH            			(WASH TIME)
REAL #HEAT            			(HEAT TIME)
REAL #COUNTER_ROW     			(ROW COUNTER)
REAL #COUNTER_SIDE    			(SIDE COUNTER)
REAL #COUNTER_DIP     			(DIP COUNTER)

(**************** MAIN G-CODE **************************************)  

(**************** INITIALIZE COUNTERS ******************************)  
#COUNTER_ROW  = 1 
#COUNTER_SIDE = 1
#COUNTER_DIP  = 1

#ROWS = 1
#STEP = 25.4
#START = 45.3
#PICKZ = -87.5
WHILE #COUNTER_ROW <#ROWS+1 DO
#PICK = #START-[#COUNTER_ROW -1]*#STEP

(*******************************************************************)
#DIPS = 1
#SIDES  = 4
#ROLLOUT_ANGLE = 10
#ROLLOUT_DIFF = 360/#SIDES-#ROLLOUT_ANGLE
#DEPTH  = 54.5
#HEAT = 30
#WASH = 5

(*******************************************************************)

G01 Z-5 F5000
 M98 PPARTLOADROTARY
G01 X#PICK F8000
G01 Z#PICKZ F2000
G04 P.5
M28                           	(TURN VACUUM PICKUP ON)
G01 Z-5 F6000                	(RETURN TO PROCESS POSITION)
(M33                           	(RETURN TO PROCESS POSITION)


M98 PPARTPREHEATROTARY 			(MOVE TO PREHEAT STATION)	
G01 Z-60      F6000
(G04 P#PT                       (PREHEAT DWELL)
G01 B360 F720*120/#HEAT         (PREHEAT ROTATE)
G04 P1
G01 B0 F720*120/#HEAT
G01 Z-5       F6000             (RETURN TO PROCESS POSITION)

WHILE #COUNTER_DIP <#DIPS+1 DO
M98 PPARTFLUX1					(MOVE TO FLUX POSITION)	
M37

M98 PQFPDIPLEFTOFFSET			(OFFSET TOOL HEAD FOR RIGHT BANK)
G01 Z-66						(MOVE TO PROCESS DEPTH)
G01 B720 F10000
G01 Z-5

(M98 PQFPDIPRIGHTOFFSET			(OFFSET TOOL HEAD FOR RIGHT BANK)
(G01 Z-66						(MOVE TO PROCESS DEPTH)
(G01 B0 F10000
(G01 Z-5
       
             
M16
M34

M98 PROTARYDSPWAVE_CENTER_LEAD	(MOVE TO LEAD SOLDER POT)

G01 Z-63.

WHILE #COUNTER_SIDE<#SIDES +1 DO
G91
G01 X#DEPTH  F1000				(INDEX TO WAVE PROCESS POSITION)
G01 A0 F2880
G04 P2.5                        (DWELL TIME)
G01 B#ROLLOUT_ANGLE F1000
G01 X-#DEPTH *.25 F125         	(ROTATE OUT						
G01 X-#DEPTH *.75 B-#ROLLOUT_ANGLE F1000

G01 X-#DEPTH  F1000				(INDEX TO WAVE PROCESS POSITION)
G01 A0 F2880
G04 P2.5
G01 B#ROLLOUT_ANGLE
G01 X#DEPTH *.25 F125	       	(ROTATE OUT)						
G01 X#DEPTH *.75 F2000
G01 B#ROLLOUT_DIFF F10000 
G90

#COUNTER_SIDE=#COUNTER_SIDE+1

ENDWHILE

M17
M35

G01 Z-5

#COUNTER_SIDE=1

#COUNTER_DIP =#COUNTER_DIP +1

ENDWHILE

M98 PPARTWASH					(MOVE TO WASH STATION)
M98 PQFPDIPLEFTOFFSET			(OFFSET TOOL HEAD FOR RIGHT BANK)
G01 Z-70 F6000					(MOVE TO PROCESS DEPTH)
G92 B0
G91 
G01 B720 F10000
G90                                                   
G01 Z-5 F4000

(M98 PPARTWASH					(MOVE TO WASH STATIO)
(M98 PQFPDIPRIGHTOFFSET			(OFFSET TOOL HEAD FOR RIGHT BANK)
(G01 Z-70 F6000					(MOVE TO PROCESS DEPTH)
(G92 B0
(G91 
(G01 B720 F10000
(G90                                                   
(G01 Z-5 F4000


(M98 PDRYON						(MOVE TO DRY STATION)	
(M98 PPARTDRY					(DRY PARTS)
(M98 PDRYOFF

M98 PPARTUNLOAD					(MOVE TO UNLOAD STATION)
(G01 X#PICK
(G01 Z#PICKZ F6000
(M29
(G04 P1.0
(G91
(G01 X-5
(G90
(G01 Z-5 F6000 

#COUNTER_ROW =#COUNTER_ROW +1

ENDWHILE

G56
M98 PUNLOAD

